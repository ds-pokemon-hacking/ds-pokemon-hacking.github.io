"use strict";(globalThis.webpackChunkkodsh_wiki_new=globalThis.webpackChunkkodsh_wiki_new||[]).push([[8586],{10719:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/in_game03-51f50e8fc1189d5b1d0cc23b294e9a2c.png"},23309:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/in_game01-c66462f71d535c6eb35fba27c9f46e51.png"},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var o=n(96540);const i={},s=o.createContext(i);function r(e){const t=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:t},e.children)}},32287:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/aspertia02-18b13348c30ade6a2d270020bc04721f.png"},32630:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/in_game02-5da8c7eef757ed48c9922a689c1b3fd8.png"},35350:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/aspertia03-5380207b82d84f0a72fd480dad03b8d9.png"},95428:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/aspertia01-68259d722246a1f3eec9f00d5194bc33.png"},98812:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"generation-v/guides/bw_b2w2-pokescript01/bw_b2w2-pokescript01","title":"Hands-on with Pok\xe9Script: Our First Script","description":"Author(s): Brom","source":"@site/docs/generation-v/guides/bw_b2w2-pokescript01/bw_b2w2-pokescript01.md","sourceDirName":"generation-v/guides/bw_b2w2-pokescript01","slug":"/generation-v/guides/bw_b2w2-pokescript01/","permalink":"/docs/generation-v/guides/bw_b2w2-pokescript01/","draft":false,"unlisted":false,"editUrl":"https://github.com/ds-pokemon-hacking/ds-pokemon-hacking.github.io/docs/generation-v/guides/bw_b2w2-pokescript01/bw_b2w2-pokescript01.md","tags":[{"inline":true,"label":"Guide (Black)","permalink":"/docs/tags/guide-black"},{"inline":true,"label":"Guide (White)","permalink":"/docs/tags/guide-white"},{"inline":true,"label":"Guide (Black 2)","permalink":"/docs/tags/guide-black-2"},{"inline":true,"label":"Guide (White 2)","permalink":"/docs/tags/guide-white-2"},{"inline":true,"label":"Hands-on with Pok\xe9Script","permalink":"/docs/tags/hands-on-with-poke-script"},{"inline":true,"label":"Hands-on with...","permalink":"/docs/tags/hands-on-with"}],"version":"current","frontMatter":{"title":"Hands-on with Pok\xe9Script: Our First Script","tags":["Guide (Black)","Guide (White)","Guide (Black 2)","Guide (White 2)","Hands-on with Pok\xe9Script","Hands-on with..."]},"sidebar":"generation_v_sidebar","previous":{"title":"Map Insertion (Generation V)","permalink":"/docs/generation-v/guides/bw_b2w2-map_insertion/"},"next":{"title":"Hands-on with Pok\xe9Script: Yes, No, Maybe a Battle So","permalink":"/docs/generation-v/guides/bw_b2w2-pokescript02/"}}');var i=n(74848),s=n(28453);const r={title:"Hands-on with Pok\xe9Script: Our First Script",tags:["Guide (Black)","Guide (White)","Guide (Black 2)","Guide (White 2)","Hands-on with Pok\xe9Script","Hands-on with..."]},a="Hands-on with Pok\xe9Script:Our First Script",h={},l=[{value:"Loading into our map",id:"loading-into-our-map",level:2},{value:"Making our new NPC",id:"making-our-new-npc",level:2},{value:"Making our new script",id:"making-our-new-script",level:2},{value:"Giving our NPC something to say",id:"giving-our-npc-something-to-say",level:2}];function c(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsxs)(t.h1,{id:"hands-on-with-pok\xe9scriptour-first-script",children:["Hands-on with Pok\xe9Script:",(0,i.jsx)("br",{}),"Our First Script"]})}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:["Author(s): ",(0,i.jsx)(t.a,{href:"https://github.com/brombrombromley",children:"Brom"})]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["What do a static encounter with a Legendary Pok\xe9mon, a talk with a Gym Leader, and a guy talking about technology have in common? They all make use of scripting! With this tutorial series, we will be learning how to script using Pok\xe9Script, a language made specifically for scripting in CTRMap by ",(0,i.jsx)(t.a,{href:"https://github.com/HelloOO7",children:"Hello007"})," and ",(0,i.jsx)(t.a,{href:"https://github.com/PlatinumMaster",children:"PlatinumMaster"}),". Getting started with scripting may be a little scary at first, but with some guidance, it can actually start to be pretty fun. By the end of this guide, you will be able to have a basic NPC that you can talk to like in this video here:"]}),"\n",(0,i.jsx)("video",{controls:!0,children:(0,i.jsx)("source",{src:"/video/generation-v/guides/bw_b2w2-pokescript01/script_demo01.mp4",type:"video/mp4"})}),"\n",(0,i.jsx)(t.h2,{id:"loading-into-our-map",children:"Loading into our map"}),"\n",(0,i.jsx)(t.p,{children:"First, let's load into Aspertia City by going into the Zone Loader tab\r\nat the top and going to Zone 427. Now that we've done that, let's return\r\nto the World Editor tab."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Player preview in Aspertia City",src:n(95428).A+"",width:"3072",height:"1778"})}),"\n",(0,i.jsx)(t.p,{children:"Looks pretty neat, right? But, we can get a better view to help us\r\nplace ourselves a new NPC. First press the F5 button to exit the\r\nsimulated player view and then press F3 to switch to the perspective\r\ncamera. Now you can see the whole map!"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Mission Control Mode of CTRMap in Aspertia City",src:n(32287).A+"",width:"3072",height:"1778"})}),"\n",(0,i.jsx)(t.p,{children:"To move around, you can use the WASD keys and Q and E to move up and down\r\nvertically respectively."}),"\n",(0,i.jsx)(t.h2,{id:"making-our-new-npc",children:"Making our new NPC"}),"\n",(0,i.jsx)(t.p,{children:"To place an NPC, click the little person icon at the top to start\r\nusing the NPC tool. With this, you can add, remove, and edit info\r\nof NPCs around a map. You can see all of this information on the\r\nrightside panel."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"NPC Editor Panel",src:n(35350).A+"",width:"3072",height:"1778"})}),"\n",(0,i.jsx)(t.p,{children:"In the panel we just opened, click the + button up at the top to\r\ncreate a new NPC. You can click and drag the NPC to place it where\r\nyou'd like on the map, but you can also type in the coordinates\r\nmanually in the location box."}),"\n",(0,i.jsxs)(t.p,{children:["For now, let's put an NPC at ",(0,i.jsx)(t.code,{children:"(x: 50, y: 16, z: 763)"})," and having the NPC\r\nface to the right by setting the orientation to \u201cEast.\u201d With the \u201cModel No.\u201d field, we can change the graphic used by our NPC as well. Feel free to set it to whatever you'd like!"]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsx)(t.p,{children:"The Y coordinate for NPCs actually uses a smaller unit than\r\nyour standard grid tile! If you look at the \"World location\"\r\nbelow the boxes to edit the NPC's location, you can see the\r\nlocation of the NPC with the world's sub units. Each standard\r\ngrid tile is made up of 16 of these subunits, so if you want\r\nto move an NPC up to be a grid unit high, you gotta set Y to 16!"})}),"\n",(0,i.jsx)(t.p,{children:"Let's build ourselves a new ROM now by going to File > Export ROM\r\n(or pressing Ctrl + E) and head to Aspertia City!"}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsx)(t.p,{children:"If you add an NPC to the map that is loaded when you resume the\r\ngame, you will have to re-enter it for them to show up! This\r\nalso applies for when you remove an NPC."})}),"\n",(0,i.jsx)(t.p,{children:"If you did everything right, you'll probably see an NPC facing\r\nthe pond towards your house! Try going up to them and trying\r\nto talk to them."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"The NPC we created won&#39;t look in our direction!",src:n(23309).A+"",width:"768",height:"577"})}),"\n",(0,i.jsx)(t.p,{children:"...It seems like our new NPC is ignoring us, but fret not! We still\r\nhaven't given the NPC a script! Let's change that!"}),"\n",(0,i.jsx)(t.h2,{id:"making-our-new-script",children:"Making our new script"}),"\n",(0,i.jsx)(t.p,{children:"Let's go over to the Event Editor panel up top then click Open in IDE.\r\nMake sure the \"Attempt to decompile\" option is checked. This should\r\nopen up the Pok\xe9Script IDE which will be our primary tool for scripting.\r\nAfter you open the script file for Aspertia City, you should see all the\r\nscripts going on in Aspertia City. There sure are a lot! Don't get too\r\nbogged down, though! Let's scroll down until we find line 1120 on the\r\nleft side of the code editor. This should be right after the script\r\nfunction called \"main_33.\" This is where we will be writing our new\r\nscript function, so make sure to give it some breathing room by pressing\r\nenter a few times to add some lines around where we're putting it."}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["You may notice there's a lot of weird stuff going on with the names of\r\nsome of the functions (like the function called ",(0,i.jsx)(t.code,{children:"sub_03eb()"}),") or the random\r\nlabels like ",(0,i.jsx)(t.code,{children:"LABEL_0997"}),". This is because any Pok\xe9Script we write gets\r\nboiled down into something the game can actually read. The reason we had to\r\ncheck the \"Attempt to decompile\" box is because CTRMap was turning what the\r\ngame already had into Pok\xe9Script for us! But, things like the naming or\r\ncomments don't exist in what the game reads, so instead we get those\r\nrandom-seeming names. Those names come from their actual location in\r\nthe script file since they don't have a real name!"]})}),"\n",(0,i.jsxs)(t.p,{children:["For our new script, let's call the function for it ",(0,i.jsx)(t.code,{children:"main_34()"})," and we'll\r\nmake a code block like this:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"public static void main_34() {\r\n\tActor.PauseAll();\r\n\tSound.SEPlay(1351);\r\n\tActor.FacePlayer();\r\n\tRuntime.FinishSubEvents();\r\n\tActor.UnpauseAll();\r\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"Save the script file then go back to the main CTRMap window and return to the\r\nWorld Editor tab. Let's assign our new NPC by the pond script 34 with the NPC\r\ntool and then export a new ROM."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Our NPC turned around to face us!",src:n(32630).A+"",width:"768",height:"577"})}),"\n",(0,i.jsx)(t.p,{children:"In game, try talking to our NPC now. It looks like our NPC is noticing us!\r\nBut it doesn't seem like they're able to talk, though... Let's break down\r\nwhat we wrote first then we'll try to get them to speak."}),"\n",(0,i.jsxs)(t.p,{children:["First let's look at the top of our new function. Whenever you want to\r\nmake a function that can be used as a script, you always need\r\n",(0,i.jsx)(t.code,{children:"public static void"})," and then a name for the function. The function\r\ncan be named anything that you'd like, but it's important\r\nto keep track of what script ID it will be."]}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsxs)(t.p,{children:["You may notice how the functions in the script file are labeled ",(0,i.jsx)(t.code,{children:"main_1()"}),",\r\n",(0,i.jsx)(t.code,{children:"main_2()"}),", and so on. This lines up with script ID 1, script ID 2, and so on.\r\nYou don't need to name your functions this way, but it's good to label the\r\nfirst public function as ",(0,i.jsx)(t.code,{children:"main_1()"})," and the second public function as ",(0,i.jsx)(t.code,{children:"main_2()"}),"\r\nor making a comment of the ID that matches with the function. If you make\r\nthe game use script ID 2 for an NPC, it doesn't matter if it's named ",(0,i.jsx)(t.code,{children:"main_2()"}),"\r\nor ",(0,i.jsx)(t.code,{children:"RunMyReallyCoolScript()"}),", as long as it is the second\r\n",(0,i.jsx)(t.code,{children:"public static void"})," function in the script file, that's what will be used."]})}),"\n",(0,i.jsxs)(t.p,{children:["Next, we'll look at ",(0,i.jsx)(t.code,{children:"Actor.PauseAll()"})," and ",(0,i.jsx)(t.code,{children:"Actor.UnpauseAll()"}),". As the name\r\nimplies, it makes all the NPCs on the map stop moving and resume moving respectively.\r\nFor most events, you'll probably want these so the NPC you're talking to doesn't\r\njust walk away from you while you're talking to them accidentally."]}),"\n",(0,i.jsxs)(t.p,{children:["After this, we have ",(0,i.jsx)(t.code,{children:"Sound.SEPlay(1351)"}),". With ",(0,i.jsx)(t.code,{children:"Sound.SEPlay()"})," we can play any\r\nsound effect that we want! In this case, sound effect 1351 is SE_MESSAGE."]}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsxs)(t.p,{children:["You can look at the other sound effects ",(0,i.jsx)(t.a,{href:"https://docs.google.com/spreadsheets/d/17YDObYDZWu4hioMmH4tQqln4a4Dzz_vXj5jfKWwvUDI/edit?usp=drivesdk",children:"here"})," or even better,\r\na tool like ",(0,i.jsx)(t.a,{href:"https://github.com/Lonk12/NitroStudio2Deluxe/releases/download/v0.2.2.2/Nitro.Studio.2.Deluxe.Zipped.zip",children:"Nitro Studio 2 Deluxe"})," can be used if you want to hear the\r\nsound effects, too!"]})}),"\n",(0,i.jsxs)(t.p,{children:["And then, with ",(0,i.jsx)(t.code,{children:"Actor.FacePlayer()"}),", if you talked to the NPC by pressing A\r\non them, then they'll face the direction of the player automatically!"]}),"\n",(0,i.jsxs)(t.p,{children:["Lastly, we have ",(0,i.jsx)(t.code,{children:"Runtime.FinishSubEvents()"}),". Don't worry too hard about this one.\r\nThis one just cleans up after our script once we're done with it."]}),"\n",(0,i.jsx)(t.h2,{id:"giving-our-npc-something-to-say",children:"Giving our NPC something to say"}),"\n",(0,i.jsx)(t.p,{children:"Let's go back to the main CTRMap window again and go to the Event Editor tab.\r\nWith the script text, scroll all the way to the bottom and right click on the\r\nlast dialogue line and click \"Add line after.\" Let's give our NPC something\r\nto say now."}),"\n",(0,i.jsxs)(t.admonition,{type:"warning",children:[(0,i.jsxs)(t.p,{children:["The text you write doesn't wrap automatically. If it's too long, it'll\r\nget cut off! Consider using something like ",(0,i.jsx)(t.a,{href:"https://docs.google.com/spreadsheets/d/1qkUqyu8AP0blNr8YGiRRJxPxl3MRijj5qXKA2SQxiNI/edit?usp=drivesdk",children:"this"})," to preview how long\r\nyour text will look in the text box to prevent it from being cut off."]}),(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsx)(t.p,{children:"With the linked spreadsheet template, it gives a conservative estimate\r\nof what your text will look like, so sometimes more may be able to fit\r\nif you are using a thin letter like i or lowercase l."})})]}),"\n",(0,i.jsx)(t.p,{children:"Give your NPC something to say! Have some fun!"}),"\n",(0,i.jsxs)(t.p,{children:["Once you're done writing some dialogue, let's go back to our script function,\r\n",(0,i.jsx)(t.code,{children:"main_34()"}),". After the command that makes the NPC face the player, let's\r\nmake them speak. Assuming your new dialogue message is message 131, we'll add"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"Message.Actor(1024, 131, 0, 0);\r\nInput.LastKeyWait();\r\nMessage.CloseAll();\n"})}),"\n",(0,i.jsx)(t.p,{children:"so then your function should look like this:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"public static void main_34() {\r\n\tActor.PauseAll();\r\n\tSound.SEPlay(1351);\r\n\tActor.FacePlayer();\r\n\tMessage.Actor(1024, 131, 0, 0);\r\n\tInput.LastKeyWait();\r\n\tMessage.CloseAll();\r\n\tRuntime.FinishSubEvents();\r\n\tActor.UnpauseAll();\r\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"Again, let's export another ROM and look at what we see."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Our NPC speaks to us now!",src:n(10719).A+"",width:"768",height:"577"})}),"\n",(0,i.jsx)(t.p,{children:"Wow, look! They can talk now!"}),"\n",(0,i.jsx)(t.p,{children:"To break this down, let's look at this bit by bit, too."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"Message.Actor()"})," makes a textbox that comes from an NPC you directly had\r\nto interact with to start the script. If you want it to come from someone\r\nelse, you'll have to use ",(0,i.jsx)(t.code,{children:"Message.ActorEx()"}),". Using the non-ex version is\r\nhandy though because you don't need to specify who's talking, but in\r\nsome cases you might need to."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["The first argument of ",(0,i.jsx)(t.code,{children:"Message.Actor()"})," is the container of messages that\r\nthe dialogue box will use. But, when you use 1024 as the container, the\r\ngame knows just to use the default one for scripts on the map (which you\r\ncan see in the Zone Loader tab.) Generally, you can just keep this at\r\n1024 without worrying too much about it."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["The second argument of ",(0,i.jsx)(t.code,{children:"Message.Actor()"})," is the message that will be used\r\nfor the text box. In this case, the message we wrote in message 131\r\nfrom Aspertia City's message container will be shown."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["The third argument of ",(0,i.jsx)(t.code,{children:"Message.Actor()"})," is the position of the text box.\r\nSince we selected 0, it will automatically place the text box.\r\nTry comparing talking to your NPC from above them compared to\r\nbelow them! If we select 1, the text box will always show on\r\ntop and if we select 2, the text box will always show on the bottom."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["The fourth and final argument of ",(0,i.jsx)(t.code,{children:"Message.Actor()"})," is the message box type.\r\nIf you use 0, it'll just be the standard talking frame, but if you set\r\nit to 1, it'll become spiky. There is a thought bubble box if you select\r\noption 2, but the text box arrow partly breaks it."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Yikes! That's a lot of parameters to remember, right? Fret not! There's\r\na document with all the commands in the game right ",(0,i.jsx)(t.a,{href:"https://docs.google.com/spreadsheets/d/1zvLQFVdv6kbEgP9TY9yfV6ChK0qsz79E6PvF5lohnGk/edit#gid=0",children:"here"}),"!"]}),"\n",(0,i.jsxs)(t.p,{children:["Anyway, to continue, we have ",(0,i.jsx)(t.code,{children:"Input.LastKeyWait()"}),". This command paired\r\nwith something like ",(0,i.jsx)(t.code,{children:"Message.CloseAll()"})," are great when you're at the\r\nend of a script and you're OK with the player immediately walking\r\naway after the NPC is done talking. Without this, if your message\r\ndidn't have a ",(0,i.jsx)(t.code,{children:"\\c"})," character to show the next message cursor, the\r\ntext box would close as soon as the text was done printing! How rude!"]}),"\n",(0,i.jsxs)(t.p,{children:["Our last new addition is ",(0,i.jsx)(t.code,{children:"Message.CloseAll()"}),". This closes text boxes\r\nof any type. Right now, we've only seen Actor-type text boxes, but\r\nif you look at the ",(0,i.jsx)(t.a,{href:"https://docs.google.com/spreadsheets/d/1zvLQFVdv6kbEgP9TY9yfV6ChK0qsz79E6PvF5lohnGk/edit?usp=sharing",children:"script command doc"}),", you might see other box\r\ntypes such as the place sign or info boxes. This command closes\r\nthese message boxes, too."]}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsx)(t.p,{children:"You must use a close command every time you use a message command. If you don't, the message box can stick on the screen even after the event and potentially make the game perform weird behaviors otherwise."})}),"\n",(0,i.jsx)(t.p,{children:"Congrats! Now that you've done this, you can make an NPC that\r\ncan talk to you! ...What do you mean you want to do more than that?"}),"\n",(0,i.jsxs)(t.p,{children:["Well, luckily for you, ",(0,i.jsx)(t.a,{href:"/docs/generation-v/guides/bw_b2w2-pokescript02/",children:"there's another part"}),"! If you need any additional support join the ",(0,i.jsx)(t.a,{href:"https://discord.gg/YBtdN3aXfv",children:"DS Modding Community Discord server"})," to get help with scripting and more!"]})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);